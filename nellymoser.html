<!-- * Nellymoser JS *  * A pure Javascript for the Nellymoser audio codec. *  * credit to JPEXS *  * javascript by--><!-- ===========++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++***************************************+--><!-- ========++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++****************************************+--><!-- ======+=+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*****************************************+--><!-- =======++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*******************************************+--><!-- ====+=+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*******************************************+--><!-- ====++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++********************************************+--><!-- ====+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*********************************************+--><!-- ======++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++**********************************************+--><!-- ======++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++************************************************+--><!-- =======++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*************************************************+--><!-- ========+++++++++++++++++++++--=++++++++++++++++++++++++++++++++++++++++++++++++++**************************************************+--><!-- --======++++++++++++++++++++----+##%%%%%%%%%%%%%%%%%%%#**++++++++++++++++++++++++***************************************************+--><!-- ---======++++++++++++++++#%+-  .-+*********************##%%%#*+++++++++++++++++***************#%%@@@@@@@@@%%#***********************+--><!-- ---======+++++++++++*#%##**-.   :-+*****************####%%%%%%%%*++++++++++++++**********%@@@@%%##########%%@@@@@#******************+--><!-- :--=====++++++++*#%#******+-     -=********##%%%#++-:.:-*%%%%%%%%#*+++++++++++***+***%@@@%#####################%@@@@****************+--><!-- :---::--=++++*%#**********=-   .::-==========++*#%%%%%#*==++++++++++++++++++**+::-#@@%############################%@@@#*************+--><!-- ---    .-=#%#*********++==-:      --==================+*#%%%#*+++++++++++++**-:=@@%#####***#########**+*#############%@@@****+==+***+--><!-- --       -=****++=========-:      :-========================*%%%*+++++++++*+:=@@####**#####################***##########%@%*=::::-**+--><!-- -        .--=============--.    ..:--===========================#%#*+++++*+-@@###*###############################**+**###**-:::::::*+--><!-- :  .      .-+++**********=-:..     :-=+===========================+#%*++**#@%##*#########################################*=::::::::-+--><!--   ..       :+****#%%###**=-.       .-=*******++======================#%**@@%##*#############################*######%@%###*:::::::-::---><!--   :.        =*****##  .=#=-         --***************+++++*++++=======+*@@%##*##############################*#**####%@@%*=:::::::+::.--><!--   :.        -%#****#*    --         :-+%%##*************#%*=**%%%%%%%#*%@%####*#**##########################**####*+***#@@@@*::::==:.--><!--   ::           =%#**%    --         :-.   -#%%#***********%%=-%##%%%%%*@@#####*#*#*##########**###############*########%@%-::::::==:.--><!--   .-              +%%                         =#%%#*********%%%*+++***#@@#######+###*##########*##################%%@@+::::::::::==:.--><!--    :.               :                        :@*:.*%%#*******#%#*+*****@@%############***#########**#########%%@@%=::::::::*:::::*-:.--><!--     :    ::                                 #*       +%%#******%%******%@@############################%%@@@@#+::::::::::::%#:::+==:::--><!-- :    .   -#   .*@*++#@=                    *+         .@-#%#****#%******%@@%###@@@@@@@@@@@@@@@@@@@@@@#+=:::::::::-+%@@@@@@%-:+@+=::::--><!-- -.    -   -@=%-        -@:                :@           :%@@%%%#**#%*****+-%@@%#%@%   =*+. *@-:::::::::::::::::-%@@#-     -#@@%-:::=:=--><!-- --    :@:  .@            =%               *=+###+       :-=+%%%%%*#%*****+::-#@@@@@*%%. +%.%#::::::::::::::::%@%            .+##*-:=+--><!-- +--.    .+%@.      :####*..@:             #=  +###.      --==#%#%%%%%****#+::    .=@@%+  -%+@:::::::::::::::@@.  .*%#:      .:::::-**--><!-- =*+-:.*.  .+      ##=    %#-@.            #   +####      :-===#%**#%%#**#%%#=     -##%-%=*#*@::::::::::::::%@   #%%+  =     .::::=*%#--><!-- =*****-:+**:     ##:     ###%@            *: #.%###-     .-====#%#***#*****=.     :**#@@@%++@:::::::::::::=@.  ##@%#  :     .:::+##%#--><!-- =+***##:        .#*     %@@##@=           +#@@@@#**=     .-=====*%#*******#%*      +++%@@+==#:::::::::::::#=  =*@@@@#**     :-+*###%#--><!-- ==****%+        :##.  =@- %%*#%           :#%@@%-==-     :+======#%#*******+:      .--=====:+:::::::::::::%   =+%@@@++-    :%**####%#--><!-- ==+****%.        ####*+@@@@#**%            *+++++-::     .-=======#%********:.       =====::::::::::::::::*   -==++-==     .::***##%#--><!-- ===****##        -+==-:=*#****#:           -+++++++      :-=+======%%*****#@**---          :::::::::::::::=    =====.     .++##*#*###--><!-- ====****#*        :-:-+*****+++.       .    =+++++ .*@@@%%-========+%%****#@%####%*        :::::::::::::::.               :::+**##*##--><!-- ====+****#%-::     .=++++++++=:     .          .  =@#####%%=========*%#**#@#######@-      .:::::::::::::::.             :@+:-**#*##**--><!-- =====+****#%%*=      -++++++.                     *#######@==*=======%%#*%%#######@%@*=::::::::::::--:::::.           .::::+**###*##*--><!-- ======##***#* *=                   :       :  :@%%@%###%#@#==+%#=====+%%*%@%@%%##%%###@+:::::-:::::::::::::::.....:::::::::+*#####*#*--><!-- ======+%%***##-                               *####%#- :-=====*%%+====#%#*#****=::@%%@+::::::--:::::-=::::::::::::::::::::+*#######**--><!-- =======*#+%#**%.                             .:@%%#   :-+++****%%%#===+%%###****=::#%%@:::::::::::::::::::::::::::::::::-**#*#######+--><!-- *====+==##**##*%-              :-===----::-:  *%#@   :=%*.      :%%%*@*:     :*@#+:*@@+::::::::::::::::::::::::::::::::=**##*#######%--><!-- %*===#*==##**-*%%*           .=**********+-   .*** .#-             -%            *#-:::::::::::::::::::::::::::::::::-**+####*#######--><!-- *%+==#%*==%***+-:=#-        :+######*****=.      .%-                 %:           +#+-:::::::::::+**+-:::::::::::::-**###+####+######--><!-- =+%+=*%##=+%****=-:        .=#########***-.     =+                    #            =%*+-::::::::-****=:::::::::::+**######+####*####*--><!-- ==+%++%++%=+%***=:.-:      :+#########***=.   .-*       == =@=        *. :%: @*     ###**+-::::::::::::::::::-+*+=*########*###*####*--><!-- ****%#%*--#*+%=--.   :-:  .-+**#****##***+: :--#-       %=#@@=        *. %@#@@@     -#**#%#***+=-::::::--=+**=-::-*########*####+####--><!-- ****=*%%   :%+%=-       :-.:---=----*##***- .+*@-        +**:         @   :**+      *#******+:-==++**++=--::::::::+**#######*####+###--><!-- **=-. .#-  .-=#%+        : .----:.......::-- =#@-   +**=:            #-            :@*******=:::::::::::::::::::::=+::+*####**###**##--><!-- *-:     .:-    =##       :.  .:-:.    -+*#*+--%%% %=....-#          :-             %********-:::::::::::::::::::::-*::::+*###*####+##--><!-- -:     .-.     :  +-      :.          --*%##%%%##@=.-....@         *#-           -@*******=*::::::::::::::::::::::-*-::::-*##*#####+*--><!-- -     .-      ..                      -:-#***##*#%%.:@#*-#      =%-..#+:     :=%*-*%****+::=:::::::::::::::::::::::+-:::::-*##*####+*--><!-- .    .-.                              : :-******###..@%=:-====-.................:..@****:::-:::::::::::::::::::::::=-::::::=*#*#####=--><!--      -:                                  :=*****#%*..@    -#--=+#---=%*****@+=:..#%****-:::::::::::::::::::::::::::::::::::-*#+#####+--><!--     .-.                                  .-*****%%#..#-   -*   -*    *  .--%#@=..+*****:::::::::::::::::::::::::::::::::::::+**#####+--><!--     :-                                    -******#%-..# +   -=    @     @    @...%****=:::::::::::::::::::::::::::::::::::::=**####%*--><!--     :-                                    :+#******@-.-%+   -*    @    -*    %...#****=:::::::::::::::::::::::::::::::::::::=*@@@@%%+--><!--     .-                                    -+#*******#@=..-=*##@####@@@@%#######.##****=:::::::::::::::::::::::::::::::::::::++%@%###+--><!--     .-.                                   -##**********%@@#############=*==##@@@******+::::::::::::::::::::::::::::::::::::-*----=*#+--><!--      ::                                  :-%********%@%#%%%..*=.......*=..:@*%@%#******-:::::::::::::::::::::::::::::::::::+=-----+*+--><!-- .     -.                              : .-##********#%@@%@=..@........==...%#***#@%****+::::::::::::::::::::::::::::::::::++-----=*#*--><!-- -      -.     .-.                     -:-*%*************%@%####%@@%%######*%@#**********+:::::::::::::::::::::::::-=:::::++------+*#*--><!-- -:      ::    :-                      :-*%***************@%----------------@%#**********-::::::::::::::::::::::::::+:::-*=------=*###--><!-- #-.      .-.  -:        .:..::        .-*******************%*------------+%************+::::::::::+:::::+::::::::::=+=*=--------*####--><!-- +=:        :-:-.          --.          -+*******************#@*--------#@**************=::::::::::+:::::*::::::::::-*=---------=*####--><!-- atfsmedia25 --><!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>AT Nellymoser Decoder</title><style>body{background: #ddd;color: #555;font-family: monospace;}a{color: #555;}.app{width: 640px;height: auto;margin: auto;}</style></head><body><div class="app"><h1>AT Nellymoser</h1><p>A pure Javascript for the Nellymoser audio codec.</p><p>credit to <a href="https://github.com/jindrapetrik/jpexs-decompiler" target="_blank">JPEXS</a></p><button onclick="playNel()">Play</button><button onclick="stopNel()">Stop</button><br><canvas id="hgg" width="640" height="360"></canvas><p style="color: #999999;">(c) 2024 <a style="color: #999999;" href="https://www.youtube.com/channel/UCOvoRZ-BUCN_9vdKQckq9gg" target="_blank">ATFSMedia Productions.</a></p></div><script>var ATNellymoser = (function() {const _1 = function() {this.bytePos = 0, this.bitPos = 0};_1.prototype.push = function(val, len, buf) {if (this.bitPos == 0) buf[this.bytePos] = val;else buf[this.bytePos] |= val << this.bitPos;this.bitPos += len;if (this.bitPos >= 8) {this.bytePos++;this.bitPos -= 8;if (this.bitPos > 0) buf[this.bytePos] = (val >> (len - this.bitPos));}},_1.prototype.pop = function(a, b) {let c = (b[this.bytePos] & 0xff) >> this.bitPos, d = 8 - this.bitPos;if (a >= d) {this.bytePos++;if (a > d) c |= b[this.bytePos] << d;};this.bitPos = (this.bitPos + a) & 7;return c & ((1 << a) - 1);};const _2 = function(a) {this.value = 0,this.scale = 0;if (a == 0) {this.value = a, this.scale = 31;return} else if (a >= (1 << 30)) {this.value = 0, this.scale = 0;return}let v = a, s = 0;if (v > 0) {do v <<= 1, ++s;while (v < (1 << 30));} else {let b = 1 << 31;do v <<= 1, ++s;while (v > b + (1 << 30));};this.value = v, this.scale = s}, _o1 = [0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 21, 24, 28, 32, 37, 43, 49, 56, 64, 73, 83, 95, 109, 124], _o2 = [6, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0], _t0 = [2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 4, 4, 5, 6, 6, 7, 8, 9, 10, 12, 14, 15, 0], _t1 = [3134, 5342, 6870, 7792, 8569, 9185, 9744, 10191, 10631, 11061, 11434, 11770, 12116, 12513, 12925, 13300, 13674, 14027, 14352, 14716, 15117, 15477, 15824, 16157, 16513, 16804, 17090, 17401, 17679, 17948, 18238, 18520, 18764, 19078, 19381, 19640, 19921, 20205, 20500, 20813, 21162, 21465, 21794, 22137, 22453, 22756, 23067, 23350, 23636, 23926, 24227, 24521, 24819, 25107, 25414, 25730, 26120, 26497, 26895, 27344, 27877, 28463, 29426, 31355], _t2 = [-11725, -9420, -7910, -6801, -5948, -5233, -4599, -4039, -3507, -3030, -2596, -2170, -1774, -1383, -1016, -660, -329, -1, 337, 696, 1085, 1512, 1962, 2433, 2968, 3569, 4314, 5279, 6622, 8154, 10076, 12975], _t3 = [0, -0.847256005, 0.722470999, -1.52474797, -0.453148007, 0.375360996, 1.47178996, -1.98225796, -1.19293797, -0.582937002, -0.0693780035, 0.390956998, 0.906920016, 1.486274, 2.22154093, -2.38878703, -1.80675399, -1.41054201, -1.07736099, -0.799501002, -0.555810988, -0.333402008, -0.132449001, 0.0568020009, 0.254877001, 0.477355003, 0.738685012, 1.04430604, 1.39544594, 1.80987501, 2.39187598, -2.38938308, -1.98846805, -1.75140405, -1.56431198, -1.39221299, -1.216465, -1.04694998, -0.890510023, -0.764558017, -0.645457983, -0.52592802, -0.405954987, -0.302971989, -0.209690005, -0.123986997, -0.0479229987, 0.025773, 0.100134, 0.173718005, 0.258554012, 0.352290004, 0.456988007, 0.576775014, 0.700316012, 0.842552006, 1.00938797, 1.18213499, 1.35345602, 1.53208196, 1.73326194, 1.97223496, 2.39781404, -2.5756309, -2.05733204, -1.89849198, -1.77278101, -1.66626, -1.57421803, -1.49933195, -1.43166399, -1.36522806, -1.30009902, -1.22809303, -1.15885794, -1.09212506, -1.013574, -0.920284986, -0.828705013, -0.737488985, -0.644775987, -0.559094012, -0.485713989, -0.411031991, -0.345970005, -0.285115987, -0.234162003, -0.187058002, -0.144250005, -0.110716999, -0.0739680007, -0.0365610011, -0.00732900016, 0.0203610007, 0.0479039997, 0.0751969963, 0.0980999991, 0.122038998, 0.145899996, 0.169434994, 0.197045997, 0.225243002, 0.255686998, 0.287010014, 0.319709986, 0.352582991, 0.388906986, 0.433492005, 0.476945996, 0.520482004, 0.564453006, 0.612204015, 0.668592989, 0.734165013, 0.803215981, 0.878404021, 0.956620991, 1.03970695, 1.12937701, 1.22111595, 1.30802798, 1.40248001, 1.50568199, 1.62277305, 1.77249599, 1.94308805, 2.29039311, 0], _t4 = [0.999981225, 0.999529421, 0.998475611, 0.996820271, 0.994564593, 0.991709828, 0.988257587, 0.984210074, 0.979569793, 0.974339426, 0.968522072, 0.962121427, 0.955141187, 0.947585583, 0.939459205, 0.930767, 0.921513975, 0.911705971, 0.901348829, 0.890448689, 0.879012227, 0.867046177, 0.854557991, 0.841554999, 0.828045011, 0.81403631, 0.799537301, 0.784556627, 0.769103289, 0.753186822, 0.736816585, 0.720002472, 0.702754676, 0.685083687, 0.666999876, 0.64851439, 0.629638195, 0.610382795, 0.590759695, 0.570780694, 0.550458014, 0.529803574, 0.50883007, 0.487550199, 0.465976506, 0.444122106, 0.422000289, 0.399624199, 0.377007395, 0.354163498, 0.331106305, 0.307849586, 0.284407496, 0.260794103, 0.237023607, 0.213110298, 0.189068705, 0.164913103, 0.1406582, 0.116318598, 0.0919089988, 0.0674438998, 0.0429382995, 0.0184067003], _t5 = [0.125, 0.124962397, 0.124849401, 0.124661297, 0.124398097, 0.124059901, 0.123647101, 0.123159699, 0.122598201, 0.121962801, 0.1212539, 0.120471999, 0.119617499, 0.118690997, 0.117693, 0.116624102, 0.115484901, 0.114276201, 0.112998702, 0.111653, 0.110240199, 0.108760901, 0.107216097, 0.105606697, 0.103933699, 0.102198102, 0.100400902, 0.0985433012, 0.0966262966, 0.094651103, 0.0926188976, 0.0905309021, 0.0883883014, 0.0861926004, 0.0839449018, 0.0816465989, 0.0792991966, 0.076903902, 0.0744623989, 0.0719759986, 0.069446303, 0.0668746978, 0.0642627999, 0.0616123006, 0.0589246005, 0.0562013984, 0.0534444004, 0.0506552011, 0.0478353985, 0.0449868999, 0.0421111993, 0.0392102003, 0.0362856016, 0.0333391018, 0.0303725004, 0.0273876991, 0.0243862998, 0.0213702004, 0.0183412991, 0.0153013002, 0.0122520998, 0.0091955997, 0.00613350002, 0.00306769996], _t6 = [-0.00613590004, -0.0306748003, -0.0551952012, -0.0796824023, -0.104121603, -0.128498107, -0.152797207, -0.177004203, -0.201104596, -0.225083902, -0.248927593, -0.272621393, -0.296150893, -0.319501996, -0.342660695, -0.365613014, -0.388345003, -0.410843194, -0.433093786, -0.455083609, -0.47679919, -0.498227686, -0.519356012, -0.540171504, -0.560661614, -0.580814004, -0.600616515, -0.620057225, -0.639124393, -0.657806695, -0.676092684, -0.693971515, -0.711432219, -0.728464425, -0.745057821, -0.761202395, -0.77688849, -0.792106628, -0.806847572, -0.8211025, -0.834862888, -0.848120272, -0.860866904, -0.873094976, -0.884797096, -0.895966172, -0.906595707, -0.916679084, -0.926210225, -0.935183525, -0.943593502, -0.95143503, -0.958703518, -0.965394378, -0.971503913, -0.977028072, -0.981963873, -0.986308098, -0.990058184, -0.993211925, -0.995767415, -0.997723103, -0.999077678, -0.999830604], _t7 = [0.00613590004, 0.0184067003, 0.0306748003, 0.0429382995, 0.0551952012, 0.0674438998, 0.0796824023, 0.0919089988, 0.104121603, 0.116318598, 0.128498107, 0.1406582, 0.152797207, 0.164913103, 0.177004203, 0.189068705, 0.201104596, 0.213110298, 0.225083902, 0.237023607, 0.248927593, 0.260794103, 0.272621393, 0.284407496, 0.296150893, 0.307849586, 0.319501996, 0.331106305, 0.342660695, 0.354163498, 0.365613014, 0.377007395, 0.388345003, 0.399624199, 0.410843194, 0.422000289, 0.433093786, 0.444122106, 0.455083609, 0.465976506, 0.47679919, 0.487550199, 0.498227686, 0.50883007, 0.519356012, 0.529803574, 0.540171504, 0.550458014, 0.560661614, 0.570780694, 0.580814004, 0.590759695, 0.600616515, 0.610382795, 0.620057225, 0.629638195, 0.639124393, 0.64851439, 0.657806695, 0.666999876, 0.676092684, 0.685083687, 0.693971515, 0.702754676, 0.711432219, 0.720002472, 0.728464425, 0.736816585, 0.745057821, 0.753186822, 0.761202395, 0.769103289, 0.77688849, 0.784556627, 0.792106628, 0.799537301, 0.806847572, 0.81403631, 0.8211025, 0.828045011, 0.834862888, 0.841554999, 0.848120272, 0.854557991, 0.860866904, 0.867046177, 0.873094976, 0.879012227, 0.884797096, 0.890448689, 0.895966172, 0.901348829, 0.906595707, 0.911705971, 0.916679084, 0.921513975, 0.926210225, 0.930767, 0.935183525, 0.939459205, 0.943593502, 0.947585583, 0.95143503, 0.955141187, 0.958703518, 0.962121427, 0.965394378, 0.968522072, 0.971503913, 0.974339426, 0.977028072, 0.979569793, 0.981963873, 0.984210074, 0.986308098, 0.988257587, 0.990058184, 0.991709828, 0.993211925, 0.994564593, 0.995767415, 0.996820271, 0.997723103, 0.998475611, 0.999077678, 0.999529421, 0.999830604, 0.999981225], _t8 = [32767, 30840, 29127, 27594, 26214, 24966, 23831, 22795, 21845, 20972, 20165, 19418, 18725, 18079, 17476, 16913, 16384, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], _t9 = [0, 0.0122715384, 0.024541229, 0.0368072242, 0.0490676723, 0.061320737, 0.0735645667, 0.0857973099, 0.0980171412, 0.110222213, 0.122410677, 0.134580716, 0.146730468, 0.158858135, 0.170961887, 0.183039889, 0.195090324, 0.207111374, 0.219101235, 0.231058106, 0.242980182, 0.254865646, 0.266712755, 0.27851969, 0.290284693, 0.302005947, 0.313681751, 0.32531029, 0.336889863, 0.348418683, 0.359895051, 0.371317178, 0.382683426, 0.393992037, 0.405241311, 0.416429549, 0.427555084, 0.438616246, 0.449611336, 0.460538715, 0.471396744, 0.482183784, 0.492898196, 0.50353837, 0.514102757, 0.524589658, 0.534997642, 0.545324981, 0.555570245, 0.565731823, 0.575808167, 0.585797846, 0.59569931, 0.605511069, 0.615231574, 0.624859512, 0.634393275, 0.643831551, 0.653172851, 0.662415802, 0.671558976, 0.680601001, 0.689540565, 0.698376238, 0.707106769, 0.715730846, 0.724247098, 0.732654274, 0.740951121, 0.749136388, 0.757208824, 0.765167296, 0.773010433, 0.780737221, 0.78834641, 0.795836926, 0.803207517, 0.81045723, 0.817584813, 0.824589312, 0.831469595, 0.838224709, 0.84485358, 0.851355195, 0.857728601, 0.863972843, 0.870086968, 0.876070082, 0.881921232, 0.887639642, 0.893224299, 0.898674488, 0.903989315, 0.909168005, 0.914209783, 0.919113874, 0.923879504, 0.928506076, 0.932992816, 0.937339008, 0.941544056, 0.945607305, 0.949528158, 0.953306019, 0.956940353, 0.960430503, 0.963776052, 0.966976464, 0.970031261, 0.972939968, 0.975702107, 0.97831738, 0.980785251, 0.983105481, 0.985277653, 0.987301409, 0.989176512, 0.990902662, 0.992479503, 0.993906975, 0.99518472, 0.996312618, 0.997290432, 0.998118103, 0.99879545, 0.999322355, 0.999698818, 0.999924719, 1], _3 = function(a) {this.value = 0,this.shift = 0;if (a == 124) {this.value = 4228, this.shift = 19;return;} else if (a == 0) {this.value = 0, this.shift = 0;return;}let b = ((~a >>> 31) << 1) - 1, c = a * b, d = -1;while ((c & (1 << 15)) == 0) c <<= 1, d++;c >>= 1;this.shift = 27 - d;let e = _t8[(c - 0x3e00) >> 10], f = c * e;f = (1 << 30) - f, f += (1 << 14), f >>= 15, f *= e, f += (1 << 14), f >>= 15;let g = f;f *= c, f = (1 << 29) - f, f += (1 << 14), f >>= 15, f *= g, f += (1 << 13), f >>= 14, f *= b;if (f > 32767 && b == 1) f = 32767;else if (f < -32768 && b == -1) f = -32768;this.value = f;}, _f1 = function(a, b, c, e, f) {var d = 0;if (c <= 0) return (d | 0);var g = 1 << (b - 1);for (var i = 0; i < c; ++i) {var h = a[i] - f;if (h < 0) h = 0;else h = (h + g) >> b;d += Math.min(h, e)};return (d | 0)}, _f2 = function(a, b, c, d) {var e = 0;for (var i = 0; i < b; ++i) if (a[i] > e) e = a[i];var f = 0, g = new _2(e);f = g.scale - 16;var h = new Int16Array(124);if (f < 0) for (var i = 0; i < b; ++i) h[i] = (a[i] >> -f);else for (var i = 0; i < b; ++i) h[i] = (a[i] << f);var k = new _3(b);for (var i = 0; i < b; ++i) h[i] = ((h[i] * 3) >> 2);var l = 0;for (var i = 0; i < b; ++i) l += h[i];f += 11, l -= c << f;var m = 0, n = l - (c << f);g = new _2(n),m = ((n >> 16) * k.value) >> 15;var o = 31 - k.shift - g.scale;if (o >= 0) m <<= o;else m >>= -o;var p = _f1(h, f, b, 6, m);if (p != c) {var a1 = (p - c), a2 = 0;if (a1 <= 0) for (; a1 >= -16384; a1 <<= 1) a2++;else for (; a1 < 16384; a1 <<= 1) a2++;var a3 = (a1 * k.value) >> 15;a2 = f - (k.shift + a2 - 15);if (a2 >= 0) a3 <<= a2;else a3 >>= -a2;var a4 = 1, b1 = 0, b2 = 0;for (; ; ) {b1 = p, b2 = m, m += a3, p = _f1(h, f, b, 6, m);if (++a4 > 19) break;if ((p - c) * (b1 - c) <= 0) break;};if (p != c) {var b3 = 0, b4 = 0, b5 = 0;if (p > c) b3 = m, m = b2, b4 = p, b5 = b1;else b3 = b2, b4 = b1, b5 = p;while (p != c && a4 < 20) {var c1 = (m + b3) >> 1;p = _f1(h, f, b, 6, c1);++a4;if (p > c) b3 = c1, b4 = p;else m = c1, b5 = p;}var c2 = Math.abs((b4 - c) | 0), c3 = Math.abs((b5 - c) | 0);if (c2 < c3) m = b3, p = b4;else p = b5;}};for (var i = 0; i < b; ++i) {var d1 = h[i] - m;if (d1 >= 0) d1 = (d1 + (1 << (f - 1))) >> f;else d1 = 0;d[i] = Math.min(d1, 6);};if (p > c) {var i = 0, d2 = 0;for (; d2 < c; ++i) d2 += d[i];d2 -= d[i - 1];d[i - 1] = c - d2;p = c;for (; i < b; ++i) d[i] = 0;};return (c - p) | 0;}, _f3 = function(a, b, c) {var f = c << 1, j = 1;for (var i = 1; i < f; i += 2) {if (i < j) {var d = a[b + i];a[b + i] = a[b + j], a[b + j] = d;var e = a[b + i - 1];a[b + i - 1] = a[b + j - 1], a[b + j - 1] = e}var x = c;while (x > 1 && x < j) j -= x, x >>= 1;j += x}}, _f4 = function(a, b, c) {var d = 1 << c, j = 0;_f3(a, b, d);for (var i = (d >> 1); i > 0; --i,j += 4) {var j0 = a[b + j], j1 = a[b + j + 1], j2 = a[b + j + 2], j3 = a[b + j + 3];a[b + j] = j0 + j2, a[b + j + 1] = j1 + j3, a[b + j + 2] = j0 - j2, a[b + j + 3] = j1 - j3};j = 0;for (var i = (d >> 2); i > 0; --i, j += 8) {var j0 = a[b + j], j1 = a[b + j + 1], j2 = a[b + j + 2], j3 = a[b + j + 3], j4 = a[b + j + 4], j5 = a[b + j + 5], j6 = a[b + j + 6], j7 = a[b + j + 7];a[b + j] = j0 + j4, a[b + j + 1] = j1 + j5, a[b + j + 2] = j2 + j7, a[b + j + 3] = j3 - j6, a[b + j + 4] = j0 - j4, a[b + j + 5] = j1 - j5, a[b + j + 6] = j2 - j7, a[b + j + 7] = j3 + j6}var i = 0, x = (d >> 3), y = 64, z = 4;for (var idx1 = c - 2; idx1 > 0; --idx1, z <<= 1, y >>= 1, x >>= 1) {j = 0;for (var idx2 = x; idx2 != 0; --idx2, j += z << 1) {for (var idx3 = z >> 1; idx3 > 0; --idx3, j += 2, i += y) {var k = j + (z << 1), j0 = a[b + j], j1 = a[b + j + 1], k0 = a[b + k], k1 = a[b + k + 1];a[b + k] = (j0 - (k0 * _t9[128 - i] + k1 * _t9[i])), a[b + j] = (j0 + (k0 * _t9[128 - i] + k1 * _t9[i])), a[b + k + 1] = (j1 + (k0 * _t9[i] - k1 * _t9[128 - i])), a[b + j + 1] = (j1 - (k0 * _t9[i] - k1 * _t9[128 - i]))};for (var idx4 = z >> 1; idx4 > 0; --idx4, j += 2, i -= y) {var k = j + (z << 1), j0 = a[b + j], j1 = a[b + j + 1], k0 = a[b + k], k1 = a[b + k + 1];a[b + k] = (j0 + (k0 * _t9[128 - i] - k1 * _t9[i])), a[b + j] = (j0 - (k0 * _t9[128 - i] - k1 * _t9[i])), a[b + k + 1] = (j1 + (k1 * _t9[128 - i] + k0 * _t9[i])), a[b + j + 1] = (j1 - (k1 * _t9[128 - i] + k0 * _t9[i]))}}}}, _f5 = function(a, b, c, d, e) {var f = 1 << c, g = (f >> 1) - 1, h = f >> 2;for (var i = 0; i < h; ++i) {var i2 = i << 1, j = f - 1 - i2, k = j - 1, in_i2 = a[b + i2], in_i2_1 = a[b + i2 + 1], in_j = a[b + j], in_k = a[b + k];d[e + i2] = (_t4[i] * in_i2 - _t6[i] * in_j), d[e + i2 + 1] = (in_j * _t4[i] + in_i2 * _t6[i]), d[e + k] = (_t4[g - i] * in_k - _t6[g - i] * in_i2_1), d[e + j] = (in_i2_1 * _t4[g - i] + in_k * _t6[g - i]);};_f4(d, e, c - 1);var l = d[e + f - 1], m = d[e + f - 2];d[e] = _t5[0] * d[e], d[e + f - 1] = d[e + 1] * -_t5[0], d[e + f - 2] = _t5[g] * d[e + f - 2] + _t5[1] * l, d[e + 1] = m * _t5[1] - l * _t5[g];var o = f - 3, p = g, j = 3;for (var i = 1; i < h; ++i, --p, o -= 2, j += 2) {var q = d[e + o], r = d[e + o - 1], s = d[e + j], t = d[e + j - 1];d[e + j - 1] = (_t5[p] * s + _t5[(j - 1) >> 1] * t), d[e + j] = (r * _t5[(j + 1) >> 1] - q * _t5[p - 1]), d[e + o] = (t * _t5[p] - s * _t5[(j - 1) >> 1]), d[e + o - 1] = (_t5[(j + 1) >> 1] * q + _t5[p - 1] * r);}}, _f6 = function(a, b, c, d, e) {var f = 1 << c, g = f >> 2, y = f - 1, x = f >> 1, j = x - 1, i = 0;_f5(b, 0, c, d, e);for (; i < g; ++i, --j, ++x, --y) {var h = a[i], k = a[j], l = d[e + x], m = d[e + y];a[i] = -d[e + j], a[j] = -d[e + i], d[e + i] = (h * _t7[y] + l * _t7[i]), d[e + j] = (k * _t7[x] + m * _t7[j]), d[e + x] = (_t7[x] * -m + _t7[j] * k), d[e + y] = (_t7[y] * -l + _t7[i] * h);}}, _f7 = function(a, b, c) {const d = new Uint8Array(124), e1 = new Float32Array(128), e2 = new Float32Array(124), e3 = new Float32Array(124), f = new Int32Array(124), o = new _1;var g = o.pop(_o2[0], b);d[0] = g, e1[0] = _t1[g];for (var i = 1; i < 23; i++) g = o.pop(_o2[i], b), d[i] = g, e1[i] = e1[i - 1] + _t2[g];for (var i = 0; i < 23; i++) {var h = Math.pow(2.0, e1[i] * (0.5 * 0.0009765625)), k = _o1[i], l = _o1[i + 1];for (; k < l; ++k) e3[k] = e1[i], e2[k] = h;}var m = _f2(e3, 124, 198, f);for (var n = 0; n < 256; n += 128) {for (var i = 0; i < 124; ++i) {let h = f[i], k = e2[i];if (h > 0) {let l = 1 << h;g = o.pop(h, b), d[i] = g, k *= _t3[l - 1 + g]} else {var p = Math.random() * 4294967296.0;if (p < (1 << 30) + (1 << 14)) k *= -0.707099974;else k *= 0.707099974;}e1[i] = k;};for (var i = 124; i < 128; ++i) e1[i] = 0;for (var i = m; i > 0; i -= 8) {if (i > 8) o.pop(8, b);else {o.pop(i, b);break;}};_f6(a, e1, 7, c, n);}}, _f8 = function(a, b, c, d) {var e = 0;var f = Math.abs(a - b[c]);for (var i = c; i < d; ++i) {var g = Math.abs(a - b[i]);if (g < f) f = g, e = i - c;};return e}, _f9 = function(a, b, c, d) {var e = c, f = d;do {var g = (e + f) >> 1;if (a > b[g]) e = g;else f = g;} while (f - e > 1);if (f != d) if (a - b[e] > b[f] - a) e = f;return e - c}, _f10 = function(a, b, c, d, e, f) { var g = 1 << d, h = g >> 2, y = g - 1, x = g >> 1, j = x - 1, i = 0;for (; i < h; ++i, ++x, --y, --j) e[f + x] = a[i], e[f + y] = a[j], e[f + i] = -b[c + j] * _t7[x] - b[c + x] * _t7[j], e[f + j] = -b[c + y] * _t7[i] - b[c + i] * _t7[y], a[i] = b[c + i] * _t7[i] - b[c + y] * _t7[y], a[j] = b[c + j] * _t7[j] - b[c + x] * _t7[x];_f5(e, f, d, e, f);}, _f11 = function(q, w, e) {const c = new Float32Array(256), d = new Float32Array(23), f = new Float32Array(23), g = new Float32Array(124), h = new Float32Array(124), j = new Int32Array(124), k = new _1;_f10(q, w, 0, 7, c, 0);_f10(q, w, 128, 7, c, 128);for (var i = 0; i < 23; ++i) {var l = _o1[i], m = _o1[i + 1], n = 0.0;for (; l < m; ++l) {var a = c[l], b = c[l + 128];n += a * a + b * b;};var o = Math.max(1.0, n / (_t0[i] << 1));d[i] = Math.round(Math.log(o) * (1.44269502 * 1024.0));};var r = _f8(d[0], _t1, 0, 64);f[0] = _t1[r];k.push(r, _o2[0], e);for (var i = 1; i < 23; ++i) {r = _f8(d[i] - f[i - 1], _t2, 0, 32);f[i] = f[i - 1] + _t2[r];k.push(r, _o2[i], e);}for (var i = 0; i < 23; ++i)d[i] = (1.0 / Math.pow(2.0, f[i] * (0.5 * 0.0009765625)));for (var i = 0; i < 23; ++i) {var l = _o1[i], m = _o1[i + 1];for (; l < m; ++l) g[l] = f[i], h[l] = d[i];}var s = _f2(g, 124, 198, j);for (var u = 0; u < 256; u += 128) {for (var i = 0; i < 124; ++i) {var p = j[i];if (p > 0) {var t = 1 << p;r = _f9(h[i] * c[u + i], _t3, t - 1, (t << 1) - 1);k.push(r, p, e);}}for (var i = s; i > 0; i -= 8) {if (i > 8) k.push(0, 8, e);else {k.push(0, i, e);break;}}}};return {decode: _f7,encode: _f11}}());</script><script>var audioContext=new AudioContext(),c=document.getElementById('hgg'),ctx=c.getContext("2d"),r=null,fh=null,bsound={},gisPlaying=false,gisTime=0,gisStartTime=Date.now();const decodeNellymoser = function(a, b) {var z = 0, x = new Float32Array(128), r = 0, c = new Float32Array(256);while (r < b.byteLength) {ATNellymoser.decode(x, new Uint8Array(b.slice(r, r + 64)), c);for (let i = 0; i < 256; i++)a[z] = (c[i] / 32768),z++;r += 64}}, encodeNellymoser = function(a) {var z = 0, x = new Float32Array(128), r = 0, c = new Float32Array(256), d = new Uint8Array((a.length / 4) | 0), e = new Uint8Array(64);while (r < d.byteLength) {for (let i = 0; i < 256; i++)c[i] = (a[z] * 32768),z++;ATNellymoser.encode(x, c, e);for (let i2 = 0; i2 < 64; i2++)d[i2 + r] = e[i2];r += 64};return d.buffer};bsound.source = null;function stopNel() {gisPlaying = false;if (bsound.source)bsound.source.disconnect(),bsound.source = null;}function playNel() {stopNel();gisStartTime = Date.now();gisPlaying = true;var source = audioContext.createBufferSource();source.buffer = r;source.connect(audioContext.destination);source.start();bsound.source = source}var xhr = new XMLHttpRequest();xhr.onload = function () {var buf = xhr.response.slice(0x2c);r = audioContext.createBuffer(1, buf.byteLength * 4, 22050);fh = r.getChannelData(0);var G = new Float32Array(buf.byteLength * 4);decodeNellymoser(G, buf);var sd = Date.now();var rs = encodeNellymoser(G);console.log("encode " + ((Date.now() - sd) / 1000) + "s");sd=Date.now();decodeNellymoser(fh, rs);console.log("decode " + ((Date.now() - sd) / 1000) + "s");console.log(rs)};xhr.responseType = "arraybuffer";xhr.open("GET", "https://assets.scratch.mit.edu/internalapi/asset/5d57d379570335b9a237a8ec8104cc1f.wav/get/");xhr.send();setInterval(function() {if (!fh) return;if (!gisPlaying)gisStartTime=Date.now();gisTime=(Date.now()-gisStartTime);ctx.clearRect(0,0,640,360);ctx.strokeStyle = "#555";ctx.beginPath();ctx.moveTo(0,180);for (var i=0;i<640;i++) {var hs = (gisTime / 1000) * 22050;ctx.lineTo(i, 180 + ((fh[i + Math.floor(hs)] || 0) * 90))}ctx.stroke();}, 10);</script></body></html>